@{
    var adId = Guid.NewGuid().ToString().Substring(0, 8);
    var defaultAdLink = "https://internboot.com";
    var isTestPage = Context.Request.Path.ToString().Contains("/Test/Take");

    // AdSense publisher ID (real, verified publisher ID)
    var adSensePublisherId = "ca-pub-8504842908769623";
    // Ad unit ID for popup ads (real, verified ad unit ID)
    var popupAdSlotId = "9319968119";
}

<div id="popupAdContainer" class="popup-ad-container" style="display: none;" data-is-test-page="@isTestPage.ToString().ToLower()">
    <div class="popup-ad ad-clickable" data-ad-link="@defaultAdLink">
        <button class="popup-ad-close">&times;</button>

        <!-- Google AdSense Ad Unit -->
        <!-- internboot -->
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8504842908769623" crossorigin="anonymous"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="@adSensePublisherId"
             data-ad-slot="@popupAdSlotId"
             data-ad-format="auto"
             data-full-width-responsive="true"
             data-ad-type="popup"
             id="popup-@adId"></ins>

        <!-- No fallback content in production mode - we only show real ads -->
    </div>
</div>

<style>
    .popup-ad-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .popup-ad {
        position: relative;
        width: 400px; /* Reduced size to be less intrusive */
        max-width: 80%; /* Ensure it's responsive */
        height: 350px; /* Reduced height */
        background-color: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        animation: fadeIn 0.3s ease-in-out; /* Smooth animation */
    }

    /* Animation for smooth appearance */
    @@keyframes fadeIn {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }

    .popup-ad-close {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 30px;
        height: 30px;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        border-radius: 50%;
        font-size: 20px;
        line-height: 1;
        cursor: pointer;
        z-index: 100; /* Ensure it's above the ad content */
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        transition: all 0.2s ease;
    }

    .popup-ad-close:hover {
        background-color: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
    }

    /* Add a label to make it clear this is an advertisement */
    .popup-ad::before {
        content: 'ADVERTISEMENT';
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 3px 8px;
        border-radius: 3px;
        font-size: 10px;
        font-weight: bold;
        z-index: 10;
    }

    .popup-ad .adsbygoogle {
        width: 100%;
        height: 100%;
    }

    /* No fallback styles in production mode */
</style>
